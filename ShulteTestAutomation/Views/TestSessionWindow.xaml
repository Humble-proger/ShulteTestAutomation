<Window x:Class="ShulteTestAutomation.Views.TestSessionWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Тестирование по методике Шульте" 
        Height="700" Width="800"
        WindowStartupLocation="CenterScreen"
        WindowState="Maximized">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Информация о текущем тесте -->
        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="10">
            <TextBlock Text="Таблица: " FontWeight="Bold"/>
            <TextBlock x:Name="CurrentTableText" Text="1/5" FontWeight="Bold" Margin="5,0,20,0"/>
            <TextBlock Text="Текущее число: " FontWeight="Bold"/>
            <TextBlock x:Name="CurrentNumberText" Text="1" FontWeight="Bold" Margin="5,0,20,0"/>
            <TextBlock Text="Время: " FontWeight="Bold"/>
            <TextBlock x:Name="TimerText" Text="00:00.00" FontWeight="Bold"/>
        </StackPanel>

        <!-- Игровое поле -->
        <ItemsControl x:Name="TableGrid" Grid.Row="1" 
                      HorizontalAlignment="Center" VerticalAlignment="Center">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <!-- Динамический UniformGrid -->
                    <UniformGrid x:Name="DynamicUniformGrid"/>
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>

            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <Button Content="{Binding}" 
                            Width="80" Height="80" 
                            FontSize="20" FontWeight="Bold"
                            Click="NumberButton_Click"
                            Background="LightBlue"
                            Margin="5"/>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>

        <!-- Информация об ошибках -->
        <Border Grid.Row="2" Background="LightYellow" Margin="10" Padding="10" 
                Visibility="Collapsed" x:Name="ErrorPanel">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                <TextBlock Text="⚠ Ошибка! " FontWeight="Bold" Foreground="Red"/>
                <TextBlock Text="Нажимайте числа по порядку" FontWeight="Bold"/>
            </StackPanel>
        </Border>

        <!-- Кнопки управления -->
        <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Center" Margin="10">
            <Button Content="Прервать тест" Click="CancelTest_Click" Background="Red" Foreground="White"/>
        </StackPanel>
    </Grid>
</Window>